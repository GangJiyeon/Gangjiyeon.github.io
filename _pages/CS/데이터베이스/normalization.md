---
title: "데이터베이스의 정규화(normalization)"
tags:
    - 정규화
date: "2024-01-06"
thumbnail: "/assets/img/thumbnail/com.gif"
---

편입 면접을 준비하고 있는데 정규화에 대한 이해하 부족한 것 같아서 이번 기회에 확실히 정리하려고 한다
그럼 이번 글에서는 데이터베이스의 정규화에 대해 알아보도록 하자!

# 정규화(normalization)란?
---
##  정규화란?
💡 정규화(normalizaion)
> 정규화는 데이터베이스 설계에서 중복을 최소화 하고, 데이터베이스의 일관성과 무결성을 유지하기 위해 데이터를 구조화 하는 과정이다. 정규화를 통해 데이터베이스의 효율성을 높이고 데이터 이상현상(anomaly)을 방지할 수 있다.

<br>

**[ 정규화의 목적 ]**
정규화의 목적은 다음과 같다!
* 유연한 데이터 구조 제공: `변경`과 `확장`이 용이한 데이터 구조를 제공한다.
* 데이터 `중복 최소화`: 중복된 데이터를 줄여 저장공간 절약한다.
* 데이터 `무결성 유지`: 데이터의 일관성을 유지하고, 오류를 방지한다.
* 데이터 `이상현상 방지`
> 이상현상(anomaly)
삽입이상: 특정 데이터를 삽입하려고 할 때, 불필요하거나 불가능한 데이터를 동시에 삽입해야하는 문제
삭제이상: 데이터를 삭제할 때, 필요한 다른 정보까지 함께 삭제되는 문제
갱신이상: 중복된 데이터 중 하나만 수정되었을 때, 데이터의 불일치가 발생하는 문제

<br>

**[ 정규화 시 주의사항 ]**
* 데이블 수가 증가해 복잡도가 높아질 수 있다.
* Join연산이 증가하는 등 성능이 저하될 수 있다.
* 분석 및 조회가 빈번한 경우, 정규화 해제(Denormalizaion)을 통해 성능을 최적화하기도 한다.

<br>
<br>

# 정규화 단계
---

정규화는 **1NF(제1정규형) > 2NF > 3NF > BCNF > 4NF > 5FN**까지 진행되고, 일반적으로는 `3FN`나 `BCNF`까지만 수행된다.

<br>

## 💡 1NF(제1정규화, Fist Normal Form)
> 각 컬럼은 `원자값(Atomic Value)`을 가져야 한다는 것으로 `하나의 컬럼에는 하나의 값`만 존재해야함을 의미한다.

<br>

**[ 1NF를 위반한 테이블 ]**
|학생ID|이름|과목|
|:---:|:---:|:---:|
|1|홍길동|수학, 과학|

- 각 칼럼에는 하나의 값만 존재해야하는 데 과목 칼럼에 수학, 과학이라는 값이 총 2개 들어있어 1NF를 위반한다.

<br>

**[ 1NF를 만족하는 테이블 ]**

|학생ID|이름|과목|
|:---:|:---:|:---|
|1|홍길동|수학|
|1|홍길동|과학|

- 해당 칼럼의 값을 나누어 저장해 1NF를 만족하도록 하였다.

<br>
<br>

## 💡 2NF(제2정규화, Second Normal Form)
> 1NF를 만족하면서, `부분적 종속(Partial Dependency)`을 제거한 것으로 **기본키(Primary Key)**의 일부가 아닌 전체에 종속되어야 한다.

<br>

**[ 1NF를 만족하면서, 2NF를 위반한 테이블 ]**

|주문ID|제품명|고객명|고객전화번호|
|:---:|:---:|:---:|:---:|
|1|초코비|신짱구|010-1234-5678|
|1|오렌지주스|신짱구|010-1234-5678|
|2|참고서|김철수|010-1111-2222|


- 기본키: (`주문ID`, `제품명`)
- `고객명`, `고객전화번호`는 `주문ID`에만 종속된다
- 부분적 종속성이 존재하여 2NF를 위반한다


<br>

**[ 2NF를 만족하는 테이블 ]**

고객명, 고객전화번호를 주문ID로만 분리하여 부분적 종속성을 제거하였다.(완전 종속성 만족!)
📎 주문테이블

|주문ID|고객명|고객전화번호|
|:---:|:---:|:---|
|1|신짱구|010-1234-5678|
|1|김철수|010-1111-2222|

📎  주문-제품 테이블

|주문ID|제품명|
|:---:|:---:|
|1|초코비|
|1|오렌지주스|
|2|참고서|





<br>
<br>

## 💡 3NF(제3정규화, Third Normal Form)
> 2NF를 만족하면서, **이행적 종속(Transitive Dependency)**을 제거한 것으로 **Non-key 속성**이 다른 Non-Key 속성에 종속되지 않아야 한다

<br>

**[ 2NF를 만족하면서, 3NF를 위반한 테이블 ]**

|직원ID|직원명|부서ID|부서명|
|:---:|:---:|:---:|:---:|
|1|김철수|D1|영업부|
|2|이영희|D2|개발부|
|3|박민수|D1|영업부|

- 기본키: `직원ID`
- 부서이름은 부서ID에 이행적 종속(Transitive Dependency) 되어있다
- 부서이름은 직원ID가 아니라 `부서ID`를 통해 결정된다

<br>

**[ 3NF로 변환 ]**

📎 직원 테이블

|직원ID|직원명|부서ID|
|:---:|:---:|:---:|
|1|김철수|D1|
|2|이영희|D2|
|3|박민수|D1|

📎 부서 테이블

|부서ID|부서명|
|:---:|:---:|
|D1|영업부|
|D2|개발부|

- 부서이름을 부서ID와 별도의 테이블로 분리하여 이행적 종속성을 제거했다!

<br>
<br>

## 💡 BCNF(Boyce-Codd Normal Form)
> 3NF를 만족하면서, **모든 결정자(Determinant)**가 후보키(Candidate Key)여야 한다

<br>

**[ 3NF를 만족하면서, BCNF를 위반한 테이블 ]**

|학생ID|과목|교수|  
|:---:|:---:|:---:| 
|1|수학| 김교수|  
|1|과학|이교수|  
|2|수학|김교수|  
|2|역사|박교수|  


- **학생ID + 과목**이 기본키지만, **과목 → 교수**로 **부분 종속성**이 존재한다
- 과목이 교수님을 결정짓기 때문에 BCNF 조건을 위반한다


<br>

**[ BCNF로 변환 ]**

📎 학생-과목 테이블

|학생ID|과목| 
|:---:|:---:|
|1|수학|  
|1|과학|  
|2|수학|  
|2|역사|  

📎 과목-교수 테이블

|과목|교수| 
|:---:|:---:|  
|수학|김교수|  
|과학|이교수|  
|역사|박교수|  


<br>
<br>

## 💡 4NF(제4정규화, Fourth Normal Form)
> 3NF와 BCNF를 만족하면서 다치 종속(Multi-Valued Dependency, MVD)이 존재하지 않아야 한다.
하나의 키에 대해 여러 독립적인 다치 종속 관계가 존재할 경우 이를 분리한다.
<br>

**[ 3NF와 BCNF를 만족하면서, 4NF를 위반한 테이블 ]**

|학생ID|과목|동아리|
|:---:|:---:|:---:|
|1|수학|축구|
|1|과학|축구|
|1|수학|음악|
|1|과학|음악|

<br>

**[ 4NF로 변환 ]**

📎 학생-과목 테이블

|학생ID|과목|
|:---:|:---:|
|1|수학|
|1|과학|

<br>
📎 학생-동아리 테이블 

|학생ID|동아리|
|:---:|:---:|
|1|축구|
|1|음악|

<br>
<br>

## 💡 5NF(제5정규화, Fifth Normal Form or PJNF, Project-Join Normal Form)
> **조인 종속(Join Dependency)**을 제거하는 단계로
테이블이 여러 개로 분리되었을 때, **데이터를 다시 조합(Join)**하면 원래의 테이블이 정확하게 재구성되어야 한다.
5NF는 실무에서 정말 드물게 사용된다!

<br>
[ 5NF 위반 ]

|프로젝트ID|직원ID|역할|
|:---:|:---:|:---:|
|p1|e1|분석|
|p1|e2|개발|
|p2|e1|분석|
|p2|e3|태스트|

<br>

**[ 5NF로 변환 ]**

📎 프로젝트-직원 테이블

|프로젝트ID|직원ID|
|:---:|:---:|
|p1|e1|
|p1|e2|
|p2|e1|
|p2|e3|

📎 직원-역할 테이블

|직원ID|역할|
|:---:|:---:|
|e1|분석|
|e2|개발|
|e1|테스트|


📎 프로젝트-역할 테이블

|프로젝트ID|역할|
|:---:|:---:|
|p1|분석|
|p1|개발|
|p2|분석|
